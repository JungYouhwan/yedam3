<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layouts/default_layout}">
<body>
	<th:block layout:fragment="Content">
		<div class="container">
			<form name="insertForm" th:action="@{/prjt/insert}" method="post"
				th:object="${projects}" id="prjtForm">
				
				<select class="form-select" th:field="*{prjtId}">
                        <option value="prjtTop" th:location="@{/prjt/insert}">프로젝트 등록</option>
                        <option value="prjtBottom" >프로젝트 업무등록</option>
                        <option value="prjtRegu" th:location="@{/regu/insert}">상시업무 등록</option>
                    </select>
				<table id="form" class="table">
					<tr>
						<th>프로젝트ID</th>
						<td><input type="text" th:field="*{prjtId}" readonly></td>
					</tr>
					<tr>
						<th>프로젝트명</th>
						<td><input type="text" th:field="*{prjtName}"></td>
					</tr>
					<tr>
						<th>부서명</th>
						<td><input type="text" th:field="*{deptName}"></td>
					</tr>
					<tr>
						<th>시작일</th>
						<td><input type="date" th:field="*{prjtStartDt}"></td>
					</tr>
					<tr>
						<th>마감일</th>
						<td><input type="date" th:field="*{prjtDueDT}"></td>
					</tr>
					<tr>
						<th>총괄책임자</th>
						<td><input type="text" th:field="*{respMngrId}"><div>
						<button type="button" class="btn btn-primary" id="repMngrIdBtn">등록</button>
						</div></td>
						
					</tr>
					<tr>
						<th>개요</th>
						<td><input type="text" th:field="*{smry}"></td>
					</tr>
					<tr>
						<th>목적</th>
						<td><textarea cols="50" th:field="*{purpose}"></textarea></td>
					</tr>
				</table>
				<div style=" text-align: center;">
					<button type="button" class="btn btn-primary" id="prjtInsertBtn" >저장</button>
					<button type="button" class="btn btn-secondary">취소</button>
				</div>
			</form>
		</div>
		
		<script>
			$(function(){
				$('#prjtInsertBtn').on('click', function(){
					let formData = $('prjtForm').serialize();
					console.log(formData);
					
					$.ajax({
						type: 'POST',
						url : '/prjtInsert',
						data : formData,
						success : function(data){
							alert('프로젝트 등록에 성공했습니다.');
							location.reload();
						},
						error : function(err){
							alert('프로젝트 등록에 실패했습니다.');
						}
					});
				});
			});
			
	/* 		document.querySelector('form[name="insertForm"]').addEventListener(
					'submit', prjtInsert);

			function prjtInsert(event) {
				event.preventDefault();

				let name = document.getElementById('prjtName');
				if (name.value == '') {
					alert('프로젝트명이 입력되지않았습니다.');
					name.focus();
					return;
				}
				alert('프로젝트등록이 완료되었습니다.');
				insertForm.submit();
			}  */
		</script>
</html>








