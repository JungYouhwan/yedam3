<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{common/layouts/default_layout}">

<body>
	<th:block layout:fragment="Content">
		<div class="test">
			<div class="d-flex justify-content-center">
				<div class="card my-4 col-11">
					<div>
						<h5 id="time"></h5>
						<button type="button" class="btn btn-primary test3">출근</button>
						<button type="button" class="btn btn-primary">퇴근</button>
					</div>
					<form name="Listform" th:action="@{/worklist}" method="Get"
						th:object="${filter}">
						<div>
							<br> <input id="oneDate" th:field="*{oneDate}" type="Date">
							<!-- <input th:field="*{twoDate}" type="Date"> -->

							<select th:field="*{wkYn}" class="form-select" id="wkYn">
								<option value="근무일" selected>근무일</option>
								<option value="연차">연차</option>
								<option value="오전반차">오전반차</option>
								<option value="오후반차">오후반차</option>
							</select> <select th:field="*{wkStat}" class="form-select" id="wkStat">
								<option value="정상근무" selected>정상근무</option>
								<option value="오후반차">결근</option>
								<option value="오후반차">지각</option>
								<option value="오후반차">조퇴</option>
							</select> <select th:field="*{wkSite}" class="form-select" id="wkSite">
								<option value="내근" selected>내근</option>
								<option value="외근">외근</option>
							</select>
							<button type="button" class="btn btn-primary test" id="filter">검색</button>
						</div>
					</form>
					<br>


					<div id="page">
						<table class="table table-striped-columns">
						<thead>
							<tr>
								<th>날짜</th>
								<th>사원번호</th>
								<th>사원명</th>
								<th>출근시간</th>
								<th>퇴근시간</th>
								<th>근무지</th>
								<th>근무상태</th>
								<th>근무여부</th>
							</tr>
						</thead>
						<tbody th:each="info : ${list}" id="infos">
							<tr>
								<td>[[${#dates.format(info.dt, "yyyy/MM/dd")}]]</td>
								<td>[[${info.empNo}]]</td>
								<td>[[${info.empName}]]</td>
								<td>[[${#dates.format(info.wkIn, "HH:mm:ss")}]]</td>
								<td>[[${#dates.format(info.wkOut, "HH:mm:ss")}]]</td>
								<td>[[${info.wkYn}]]</td>
								<td>[[${info.wkStat}]]</td>
								<td>[[${info.wkSite}]]</td>
							</tr>
						</tbody>
						</table>
					</div>
					<div>
						<nav aria-label="Page navigation">
							<ul class="pagination">
								<th:block th:if="${filter.prev}">
									<li class="page-item prev disabled"><a class="page-link"
										th:href="|worklist?page=${filter.startPage - 1 }|"><i
											class="bx bx-chevron-left"></i></a></li>
								</th:block>
								<th:block
									th:each="num : ${#numbers.sequence(1, filter.endPage)}">
									<li class="page-item"
										th:attrappend="class=${num ==  filter.page ? 'active' : ' '}">
										<a th:href="|worklist?page=${num}|" class="page-link">[[${num}]]</a>
									</li>
								</th:block>
								<th:block th:if="${filter.next}">
									<li class="page-item next"><a class="page-link"
										th:href="|worklist?page=${filter.endPage + 1 }|"><i
											class="bx bx-chevron-right"></i></a></li>
								</th:block>
							</ul>
						</nav>
					</div>

				</div>
			</div>
		</div>

		<script>
			$('#filter').on('click', filters);
	
			function filters() {
				var oneDate = $('#oneDate').val();
				var wkYn = $('#wkYn').val();
				var wkStat = $('#wkStat').val();
				var wkSite = $('#wkSite').val();
				var tr = $('tbody').children('tr');
				console.log(wkYn);
				console.log(wkStat);
				console.log(wkSite);
				
				$.get({
					url:'worklist',
					method:'Get',
					data:{
						oneDate: oneDate,
						wkYn:    wkYn,
						wkStat:  wkStat,
						wkSite:  wkSite
						},
					success: function(info){
						  $(tr).html('');
						  
						  
						  
						  
						  
						console.log('성공');
					}
				})
			};
		</script>
	</th:block>
</body>
</html>