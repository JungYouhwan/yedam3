<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org/"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorate="~{common/layouts/default_layout}">
<body>
<th:block layout:fragment="Content">
	<div class="d-flex justify-content-center">
		<form id="emailInsertForm" th:action="@{/emailInsert}" method="post" th:object="${email}" class="card my-4 col-10">
		<div>
			<h5 class="card-header">메일상세</h5>
			<div class="card-body">
				<div class="mt-3 row">
					<label for="title" class="col-md-2 col-form-label">발신자</label>
					<!-- 아래 text에 세션에서 받아온 id를 집어넣기. VO가 아니라. 어떻게 하지? -->
					<input class="form-control" type="text" th:value="${empId}" name="sender" id="sender" readonly>
                    <div class="col-md-10">
                    	<!-- <input  type="text" th:field="*{sender}" /> -->
                    </div>
                </div>
                
                <div class="mt-3 row">
					<label for="title" class="col-md-2 col-form-label">수신자</label>
                    <div class="col-md-10">
                    	<input class="form-control" type="text" th:field="*{recp}" />
                    </div>
                </div>
                
                <button type="button" class="btn btn-primary doc-modal-btn" 
						data-bs-toggle="modal" data-bs-target="#selectrecp">
				  주소록
				</button>
				
                <div class="mt-3 row">
					<label for="title" class="col-md-2 col-form-label">참조자</label>
                    <div class="col-md-10">
                    	<input class="form-control" type="text" th:field="*{refer}" />
                    </div>
                </div>
                
                <button type="button" class="btn btn-primary doc-modal-btn" 
						data-bs-toggle="modal" data-bs-target="#selectrefer">
				  주소록
				</button>
				
                <div class="mt-3 row">
					<label for="title" class="col-md-2 col-form-label">제목</label>
                    <div class="col-md-10">
                    	<input class="form-control" type="text" th:field="*{title}" />
                    </div>
                </div>
                
                <div class="mt-3 row">
                	<label for="cntn" class="col-md-2 col-form-label">내용</label>
                   	<div class="col-md-10">
                   		<textarea class="form-control" th:field="*{cntn}">...</textarea>
                    </div>
                </div>
                
				<!-- 참조자를 선택할 Modal, 여기서도 사원 주소록을 불러와야 한다. -->
				<div class="modal fade" id="selectrefer" tabindex="-1" aria-labelledby="modalScrollableTitle" aria-hidden="true">
				  <div class="modal-dialog modal-xl" role="document">
				    <div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="modalScrollableTitle">선택</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body"></div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
							<button type="button" class="btn btn-primary selbtn">선택완료</button>
						</div>
				    </div>
				  </div>
				</div>
				<!-- 모달끝 -->
				<!-- 수신자를 선택할 Modal, 여기서 사원 주소록을 불러와야 한다. -->
						<div class="modal fade" id="selectrefer" tabindex="-1" aria-labelledby="modalScrollableTitle" aria-hidden="true">
				  <div class="modal-dialog modal-xl" role="document">
				    <div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title" id="modalScrollableTitle">선택</h5>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
						</div>
						<div class="modal-body"></div>
						<div class="modal-footer">
							<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">닫기</button>
							<button type="button" class="btn btn-primary selbtn">선택완료</button>
						</div>
				    </div>
				  </div>
				</div>
				</div>
                </div>
               <div class="d-flex justify-content-end mt-3 row">
					<div class="col-4 text-end">
						<label for="docfile" class="col-md-4 col-form-label">첨부파일</label>
							<input type="file" class="form-control" id="docfile" />
					</div>
                <div class="mt-3 text-end">
                	<button type="submit" class="btn rounded-pill btn-primary">메일 전송</button>
                	<button type="button" id="cancel" class="btn rounded-pill btn-secondary">취소</button> <!-- 취소 클릭 시 받은메일함 이동-->
                </div>
			</div>
		</form>
		</div>
</th:block>

<script>
$('#emailInsertForm').submit(function(e) {
	e.preventDefault();
	if(!emailCheck()) return;
	if(confirm('발송하시겠습니까?')){
		this.submit();	
	}
})

function emailCheck(e) {
	if($('#title').val() == '') {
		alert('제목은 필수입력값입니다.');
		$('#title').focus();
		return false;
	}
	return true;
}
</script>

</body>
</html>